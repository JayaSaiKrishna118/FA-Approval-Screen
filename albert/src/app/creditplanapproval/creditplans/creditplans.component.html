<div class="card">
    <div class="card-header">
        @if(atRisk) {
        <div class="d-flex">
            <div class="p-2 text-danger">Risky Credit Plans</div>
            <div class="pt-1 ms-auto">
                @if(decisionStatus == DecisionStatus.PENDING) {
                <a class="info" ngbTooltip="Risky credit plans require individual approval" placement="bottom"
                    triggers="hover" autoClose="true">
                    <fa-icon icon="info-circle"></fa-icon>
                </a>
                }
            </div>
        </div>
        } @else {
        <div class="d-flex">
            <div class="p-2 text-success">Safe Credit Plans</div>
            @if(decisionStatus == DecisionStatus.PENDING) {
            <div class="pt-1 ms-auto">
                <button type="button" class="btn btn-sm btn-outline-primary"
                    ngbTooltip="Click to approve all safe credit plans" placement="bottom" triggers="hover"
                    autoClose="true" (click)="approveSafePlans()">
                    <fa-icon icon="check"></fa-icon>
                </button>
            </div>
            }
        </div>
        }
    </div>
    <div class="card-body">
        <div class="table-responsive-sm">
            <table class="table table-hover">
                <tbody>
                    @for (plan of creditPlans; track plan.id) {
                    @if (plan.atRisk == atRisk && plan.decisionStatus == decisionStatus) {
                    <tr>
                        <td role="button" (click)="displayCreditPlan($event, plan)">
                                {{ plan.studentInfo.name + ' (' + plan.studentInfo.program + ')'}}
                        </td>
                    </tr>
                    }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>